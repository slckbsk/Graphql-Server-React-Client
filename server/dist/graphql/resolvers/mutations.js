"use strict";Object.defineProperty(exports,"__esModule",{value:true});exports.Mutation=void 0;var _nanoid=require("nanoid");function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable})),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach(function(key){_defineProperty(target,key,source[key])}):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}var nanoid=(0,_nanoid.customAlphabet)("1234567890",3);var Mutation={// --USER
createUser:function createUser(parent,_ref,_ref2){var data=_ref.data;var pubSub=_ref2.pubSub,db=_ref2.db;var user=_objectSpread({id:nanoid()},data);db.users.push(user);pubSub.publish("userCreated",{userCreated:user});return user},updateUser:function updateUser(parent,_ref3,_ref4){var id=_ref3.id,data=_ref3.data;var pubSub=_ref4.pubSub,db=_ref4.db;var user_index=db.users.findIndex(function(user){return user.id===id});var updated_user=db.users[user_index]=_objectSpread(_objectSpread({},db.users[user_index]),data);pubSub.publish("userUpdated",{userUpdated:updated_user});return user_index===-1?new Error("KULLANICI BULUNAMADI !!"):updated_user},deleteUser:function deleteUser(parent,_ref5,_ref6){var id=_ref5.id;var pubSub=_ref6.pubSub,db=_ref6.db;var user_index=db.users.findIndex(function(user){return user.id===id});var deleted_user=db.users[user_index];db.users.splice(user_index,1);pubSub.publish("userDeleted",{userDeleted:deleted_user});return user_index===-1?new Error("KULLANICI BULUNAMADI !!"):deleted_user},deleteAllUsers:function deleteAllUsers(_,__,_ref7){var db=_ref7.db;var length=db.users.length;db.users.splice(0,length);return{count:length}},// --POST
createPost:function createPost(parent,_ref8,_ref9){var data=_ref8.data;var pubSub=_ref9.pubSub,db=_ref9.db;var post=_objectSpread({id:nanoid()},data);db.posts.push(post);pubSub.publish("postCreated",{postCreated:post});pubSub.publish("postCount",{postCount:db.posts.length});return post},updatePost:function updatePost(parent,_ref10,_ref11){var id=_ref10.id,data=_ref10.data;var pubSub=_ref11.pubSub,db=_ref11.db;var post_index=db.posts.findIndex(function(post){return post.id===id});var updated_post=db.posts[post_index]=_objectSpread(_objectSpread({},db.posts[post_index]),data);pubSub.publish("postUpdated",{postUpdated:updated_post});return post_index===-1?new Error("POST  BULUNAMADI !!"):updated_post},deletePost:function deletePost(parent,_ref12,_ref13){var id=_ref12.id;var pubSub=_ref13.pubSub,db=_ref13.db;var post_index=db.posts.findIndex(function(post){return post.id===id});var deleted_post=db.posts[post_index];db.posts.splice(post_index,1);pubSub.publish("postDeleted",{postDeleted:deleted_post});pubSub.publish("postCount",{postCount:db.posts.length});return post_index===-1?new Error("POST  BULUNAMADI !!"):deleted_post},deleteAllPosts:function deleteAllPosts(_,__,_ref14){var pubSub=_ref14.pubSub,db=_ref14.db;var length=db.posts.length;db.posts.splice(0,length);pubSub.publish("postCount",{postCount:db.posts.length});return{count:length}},//--COMMENT
createComment:function createComment(parent,_ref15,_ref16){var data=_ref15.data;var pubSub=_ref16.pubSub,db=_ref16.db;var comment=_objectSpread({id:nanoid()},data);db.comments.push(comment);pubSub.publish("commentCreated",{commentCreated:comment});return comment},updateComment:function updateComment(parent,_ref17,_ref18){var id=_ref17.id,data=_ref17.data;var pubSub=_ref18.pubSub,db=_ref18.db;var comment_index=db.comments.findIndex(function(comment){return comment.id===id});var updated_comment=db.comments[comment_index]=_objectSpread(_objectSpread({},db.comments[comment_index]),data);pubSub.publish("commentUpdated",{commentUpdated:updated_comment});return comment_index===-1?new Error("COMMENT  BULUNAMADI !!"):updated_comment},deleteComment:function deleteComment(parent,_ref19,_ref20){var id=_ref19.id;var pubSub=_ref20.pubSub,db=_ref20.db;var comment_index=db.comments.findIndex(function(comment){return comment.id===id});var deleted_comment=db.comments[comment_index];db.comments.splice(comment_index,1);pubSub.publish("commentDeleted",{commentDeleted:deleted_comment});return comment_index===-1?new Error("COMMENT  BULUNAMADI !!"):deleted_comment},deleteAllComments:function deleteAllComments(_,__,_ref21){var db=_ref21.db;var length=db.comments.length;db.comments.splice(0,length);return{count:length}}};exports.Mutation=Mutation;